<!DOCTYPE html>
<html>
<head>
  <title>WhatsApp Messages</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    h2 { color: #444; }
    .user-block { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
    .meta { color: #888; font-size: 12px; }
    .msg { margin: 5px 0; }
    .msg-type { font-weight: bold; margin-right: 5px; }
  </style>
</head>
<body>
  <h1>ðŸ“© Admin Message Inbox</h1>

  <% Object.keys(grouped).forEach(from => { %>
    <div class="user-block">
      <h2>ðŸ“ž <%= from %> (<%= grouped[from].name %>)</h2>
      <% grouped[from].messages.forEach(msg => { %>
        <div class="msg">
          <span class="meta">[<%= new Date(msg.createdAt).toLocaleString() %>]</span>
          <span class="msg-type"><%= msg.type %>:</span>
          <span>
            <%= msg.text || msg.payload || "..." %>
          </span>
        </div>
      <% }) %>
    </div>
  <% }) %>
</body>
</html>

