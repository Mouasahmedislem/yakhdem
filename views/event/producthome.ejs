 
<!DOCTYPE html>
<html lang="en">
<head>


<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="strict-origin-when-cross-origin">
<!-- Meta Pixel Code -->
<% if (process.env.FB_PIXEL_ID) { %>
<!-- Facebook Pixel Code -->


<script>



  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '<%= process.env.FB_PIXEL_ID %>', {
    em: '<%= user ? user.email : "" %>',
    fn: '<%= user ? user.firstName : "" %>',
    ln: '<%= user ? user.lastName : "" %>',
    ph: '<%= user ? user.numero : "" %>'
  });
 
  fbq('track', 'ViewContent', {
    content_name: '<%= producthome.title %>',
    content_ids: ['<%= producthome._id %>'],
    content_type: 'product',
    value: <%= producthome.price %>,
    currency: 'DZD'
  }, {
        eventID: '<%= metaEventId %>' // Same ID as server-side

  });

</script>
<noscript>
  <img height="1" width="1" style="display:none" 
       src="https://www.facebook.com/tr?id=<%= process.env.FB_PIXEL_ID %>&ev=PageView&noscript=1"/>
</noscript>
<!-- End Facebook Pixel Code -->
<% } %>

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="product" />
<meta property="og:title" content="<%= producthome.title %>" />
<meta property="og:description" content="<%= producthome.description %>" />
<meta property="og:image" content="<%= producthome.image %>" />
<meta property="og:url" content="https://<%= req.get('host') + req.originalUrl %>" />
<meta property="og:site_name" content="Paintello" />
<meta property="product:price:amount" content="<%= producthome.price %>" />
<meta property="product:price:currency" content="DZD" />

  <title>Paintello Home</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">  
  <meta name="theme-color" content="#ffffff">  <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="/assets/vendor/font-awesome/css/fontawesome-all.min.css">
  <link rel="stylesheet" href="/assets/vendor/animate.css/animate.min.css">
  <link rel="stylesheet" href="/assets/vendor/hs-megamenu/src/hs.megamenu.css">
<!-- Bootstrap 4 CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<!-- Font Awesome (optional for icons) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
   <!-- Bootstrap core CSS -->
  <link href="../../css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="../../css/mdb.min.css" rel="stylesheet">
<!-- Add the slick-theme.css if you want default styling -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<!-- Add the slick-theme.css if you want default styling -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  <!-- Material Design Bootstrap -->
  <link href="/css/mdb.min.css" rel="stylesheet">
  <link href="/css/magiczoomplus.css" rel="stylesheet">
  <link href="/css/zoomm.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <style>
  
 /* public/css/home.css */
body {
  font-family: 'Helvetica Neue', sans-serif;
  margin: 0;
  padding: 0;
  background-color: #fdfdfd;
  color: #333;
}

header, footer {
  background: white;
  padding: 20px 40px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}

.logo {
  font-size: 2.5rem;
  font-weight: bold;
  letter-spacing: 2px;
}

.banner {
  width: 100%;
  height: 80vh;
  background-size: cover;
  background-position: center;
  display: flex;
  justify-content: center;
  align-items: center;
}

.banner-text {
  background: rgba(255, 255, 255, 0.85);
  padding: 40px;
  font-size: 2rem;
  text-transform: uppercase;
}

.section {
  padding: 60px 20px;
  max-width: 1200px;
  margin: auto;
}


.section-title {
  font-size: 2rem;
  margin-bottom: 40px;
  text-align: center;
}

.products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 30px;
}

.product {
  text-align: center;
}

.product img {
  width: 100%;
  border: 1px solid #eee;
  transition: transform 0.3s ease;
}

.product img:hover {
  transform: scale(1.05);
}

footer {
  margin-top: 60px;
  font-size: 0.9rem;
}

.logo-img {
  height: 60px;

}



.badge-danger {
  position: absolute;
  top: -5px;
  right: -10px;
  font-size: 0.75rem;
}
.logo {
  font-size: 1.6rem;
  font-weight: 600;
  color: #222;
}





.cart-btn {
  padding: 8px 16px;
  background-color: #f0f0f0;
  border-radius: 20px;
  color: #222;
  font-weight: 500;
  transition: background-color 0.3s;
}

.cart-btn:hover {
  background-color: #ddd;
}
.add-to-cart-button {
  display: inline-block;
  background-color: #f8f8f8;
  color: #222;
  padding: 8px 16px;
  border: 1px solid #ccc;
  border-radius: 25px;
  text-decoration: none;
  font-size: 0.9rem;
  transition: background-color 0.3s;
}

.add-to-cart-button:hover {
  background-color: #e0e0e0;
}





.product-title {
  font-size: 2rem;
  margin-bottom: .5rem;
}

.product-price {
  font-size: 1.5rem;
  color: #f4791f;
  margin-bottom: 1rem;
}

/* Zoom-on-hover for carousel images */

.zoomable:hover {
  transform: scale(1.1);
}

/* Tab styling override (optional) */
#infoTab .nav-link {
  color: #555;
}
#infoTab .nav-link.active {
  color: #f4791f;
  border-color: #f4791f #f4791f #fff;
}
.zoomable {
  transition: transform .2s ease;
  cursor: zoom-in;
}
.zoomable:hover {
  transform: scale(1.1);
}
.product-title { font-size: 2rem; margin-bottom: .5rem; }
.product-price { font-size: 1.5rem; color: #f4791f; }
.logo-img {
  height: 45px;
  width: auto;
}

.cart-badge {
  position: absolute;
  top: 0px;
  right: 0px;
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: 50%;
}
</style>

</head>
<body>


  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top scrolling-navbar">
  <div class="container">

    <!-- LOGO -->
    <a class="logo" href="/">
      <img src="/img/logo.png" alt="Paintello Home Logo" style="max-height: 120px;">
    </a>

    

    <!-- Navbar links -->
  
      <ul class="navbar-nav nav-flex-icons ml-auto ">

        <!-- PROFILE -->
        <li class="nav-item dropdown">
        
             <a class="nav-link dropdown" id="menu1" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fas fa-user"></i>
            </a>
          <div class="dropdown-menu dropdown-menu-right bootstrap-menu  white scrollbar-default" aria-labelledby="menu1">
                        <% if (login){ %>
                          <a class="dropdown-item" href="/user/profile">profile</a>
                           <a class="dropdown-item" href="/user/logout">Logout</a>
                           <% } else{ %>
                           <a class="dropdown-item" href="/user/signup">Register</a>
                           <a class="dropdown-item" href="/user/signin">Sing up</a>
                           <a class="dropdown-item" href="/track-login">Track Order</a>
                           
                           <% } %>
                 </div> 
           
          
        </li>

        <!-- CART -->
        <li class="nav-item mx-2 position-relative">
          <a class="nav-link" href="/shop" title="Cart">
            <i class="fas fa-shopping-cart"></i>
            <% if (session.cart && session.cart.totalQty > 0) { %>
              <span class="badge badge-danger cart-badge"><%= session.cart.totalQty %></span>
            <% } %>
          </a>
        </li>

      </ul>
    </div>
  
</nav>
  </header>

  <div class="banner" style="background-image: url('https://live.staticflickr.com/65535/54530748939_dda2a74c86.jpg');">
    <div class="banner-text">Transform Your Home with Color & Comfort</div>
  </div>
  <div class="container my-5">
  <div class="row">
    <!-- IMAGE SLIDER -->
    <div class="col-md-6">
      <div id="productCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <% producthome.image.forEach((img, i) => { %>
            <li data-target="#productCarousel" data-slide-to="<%= i %>" class="<%= i===0?'active':'' %>"></li>
          <% }) %>
        </ol>
        <div class="carousel-inner">
          <% producthome.image.forEach((img, i) => { %>
            <div class="carousel-item <%= i===0?'active':'' %>">
              <img src="<%= img %>" class="d-block w-100 zoomable" alt="Slide <%= i+1 %>">
            </div>
          <% }) %>
        </div>
        <a class="carousel-control-prev" href="#productCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#productCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon"></span>
        </a>
      </div>
    </div>

    <!-- DETAILS -->
    <div class="col-md-6">
      <h1 class="product-title"><%= producthome.title %></h1>
      <p class="product-price"><%= producthome.price.toFixed(2) %> DA</p>
<form action="/add-to-cart-producthome/<%= producthome._id %>" method="GET" 
      onsubmit="return handleAddToCart(event, '<%= producthome.title %>', <%= producthome.price %>, '<%= producthome._id %>')">
  <button type="submit" class="btn btn-primary btn-lg mb-4">
    <i class="fas fa-cart-plus mr-2"></i>Add to Cart
  </button>
</form>

 
      <ul class="nav nav-tabs" id="infoTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="desc-tab" data-toggle="tab" href="#desc" role="tab">Description</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="info-tab" data-toggle="tab" href="#info" role="tab">Information</a>
        </li>
      </ul>
      <div class="tab-content p-3 border border-top-0" id="infoTabContent">
        <div class="tab-pane fade show active" id="desc" role="tabpanel">
          <p><%= producthome.description %></p>
        </div>
        <div class="tab-pane fade" id="info" role="tabpanel">
          <ul class="list-unstyled">
            <% for (let key in producthome.details) { %>
              <li><strong><%= key %>:</strong> <%= producthome.details[key] %></li>
            <% } %>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<div itemscope itemtype="https://schema.org/Product">
  <meta itemprop="productID" content="<%= producthome._id %>" />
  <meta itemprop="name" content="<%= producthome.title %>" />
  <meta itemprop="description" content="<%= producthome.description %>" />
  <meta itemprop="image" content="<%= producthome.image %>" />

  <div itemprop="offers" itemscope itemtype="https://schema.org/Offer">
    <meta itemprop="priceCurrency" content="DZD" />
    <meta itemprop="price" content="<%= producthome.price %>" />
    <meta itemprop="availability" content="https://schema.org/InStock" />
    <meta itemprop="url" content="https://<%= req.get('host') + req.originalUrl %>" />
  </div>
</div>

<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "<%= producthome.title %>",
  "image": "<%= producthome.image %>",
  "description": "<%= producthome.description %>",
  "sku": "<%= producthome._id %>",
  "offers": {
    "@type": "Offer",
    "url": "https://<%= req.get('host') + req.originalUrl %>",
    "priceCurrency": "DZD",
    "price": "<%= producthome.price %>",
    "availability": "https://schema.org/InStock"
  }
}
</script>


</body>
 <script>
    function toggleAccordion() {
      document.getElementById("accordionContent").classList.toggle("open");
    }
  </script>



<script>
  function handleAddToCart(event, title, price, id) {
    const eventId = window.__meta_event_id || `addtocart_${id}_${Date.now()}`;

    fbq('track', 'AddToCart', {
      content_name: title,
      content_ids: [id],
      content_type: 'product',
      value: price,
      currency: 'DZD'
    }, {
      eventID: eventId
    });

    // Allow form to continue
    return true;
  }
</script>

  <script>

  fetch('/store-event-id', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ eventId })
  }).then(res => console.log("Event ID sent to server:", eventId));
</script>



<%- include ("../partials/footer") %>.
