<!DOCTYPE html>
<html lang="en">

<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<!-- Meta Pixel with Advanced Matching and SHA-256 hashing -->
<!-- Meta Pixel Code -->
<script>
  

  !function(f,b,e,v,n,t,s){
    if(f.fbq)return;n=f.fbq=function(){n.callMethod ?
    n.callMethod.apply(n,arguments) : n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s);
  }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');

   fbq('init', '633564199312760', {
    em: '<%= user ? user.email : "" %>',
    fn: '<%= user ? user.firstName : "" %>',
    ln: '<%= user ? user.lastName : "" %>',
    ph: '<%= user ? user.numero : "" %>'
  });
fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none"
       src="https://www.facebook.com/tr?id=633564199312760&ev=PageView&noscript=1"/>
</noscript>
<!-- End Meta Pixel Code -->


  <meta name="facebook-domain-verification" content="plfly5a8dktgdy17nvv2h8zsrpc9g5" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Paintello | Checkout</title> 
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">  
  <meta name="theme-color" content="#ffffff">  <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="../../css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="../../css/mdb.min.css" rel="stylesheet">
 <style>
     
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #fefefe;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    .carousel {
      position: relative;
      overflow: hidden;
      width: 100%;
      border-radius: 12px;
    }
    .carousel-images {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }
    .carousel-images img {
      width: 100%;
      flex-shrink: 0;
    }
    .carousel-buttons {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
    }
    .carousel-buttons button {
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      padding: 0 12px;
    }
    .price {
      color: #f4791f;
      font-size: 1.5rem;
      margin: 10px 0;
    }
    .btn {
      display: inline-block;
      background: #f4791f;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 30px;
      text-decoration: none;
      font-size: 1rem;
      margin-top: 20px;
      cursor: pointer;
    }
    .btn:hover {
      background: #c85f0d;
    }
    .quantity {
      margin-top: 20px;
    }
    .quantity label {
      margin-right: 10px;
      font-weight: bold;
    }
    .quantity input {
      width: 60px;
      padding: 5px;
      font-size: 1rem;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .cart-link {
      display: block;
      margin-top: 30px;
      text-align: center;
    }
    .cart-link a {
      color: #f4791f;
      text-decoration: none;
      font-weight: bold;
    }
    .cart-link a:hover {
      text-decoration: underline;
    }
    .checkout-form {
      margin-top: 40px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
    .checkout-form label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .checkout-form input, .checkout-form select {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
  </style>

</head>


<body>
  <!-- Main Navigation -->
  <header>
<script type="text/javascript" src="javascripts/checkout.js"></script>
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>




    
  <!-- Your fixed logo here -->
  <div id="checkout-logo" style="text-align: center; margin-top: 20px;">
    <a href="/">
      <img src="/favicon/android-chrome-192x192.png" alt="Paintello Logo" style="max-height: 80px;">
    </a>
<a href="/">
      <img src="/img/logo.png" alt="Paintello Logo" style="max-height: 80px;">
    </a>
  </div>

                 
                  <!-- Body -->

                   <div class="checkout-form">
      <h2>Checkout (Algeria Only)</h2>
      <form action="/checkout" method="POST">
        <label for="fullname">Full Name</label>
        <input type="text" id="name" name="name" required>

        <label for="phone">Phone Number</label>
        <input type="tel" name="numero" id="numero" pattern="0[5-7][0-9]{8}" placeholder="e.g. 0551234567" required>
        <label for="country">Country</label>
        <input type="text" id="country" name="country" value="Algeria" readonly>
        <label for="city">Wilaya</label>
        <select id="city" name="city" required>
          <option value="">Select your wilaya</option>
          <option value="Algiers">Alger</option>
          <option value="Oran">Oran</option>
          <option value="Constantine">Constantine</option>
          <option value="Blida">Blida</option>
          <option value="Annaba">Annaba</option>
          <option value="ADRAR">ADRAR</option>
<option value="chlef">CHLEF</option>
  <option value="laghouat">LAGHOUAT</option>
  <option value="oum el bouaghi">OUM EL BOUAGHI</option>
  <option value="batna">BATNA</option>
  <option value="bejaia">BEJAIA</option>
  <option value="biskra">BISKRA</option>
  <option value="bechar">BECHAR</option>
  <option value="blida">BLIDA</option>
  <option value="bouira">BOUIRA</option>
  <option value="tamanrasset">TAMANRASSET</option>
  <option value="tebessa">TEBESSA</option>
  <option value="tlemcan">TLEMCAN</option>
  <option value="tiaret">TIARET</option>
  <option value="tizi ouzou">TIZI OUZOU</option>
  <option value="djelfa">DJELFA</option>
  <option value="jijel">JIJEL</option>
  <option value="setif">SETIF</option>
  <option value="saida">SAIDA</option>
  <option value="skikda">SKIKDA</option>
  <option value="sidi belabbas">SIDI BELABBAS</option>
  <option value="geulma">GEULMA</option>
  <option value="medea">MEDEA</option>
  <option value="mostaganem">MOSTAGANEM</option>
  <option value="m'sila">M'SILA</option>
  <option value="mascara">MASCARA</option>
  <option value="ouergla">OUERGLA</option>
  <option value="el bayadh">EL BAYADH</option>
  <option value="borj bou arreridj">BORJ BOU ARRERIDJ</option>
  <option value="boumerdas">BOUMERDAS</option>
  <option value="el taref">EL TAREF</option>
  <option value="tissemsil">TISSEMSIL</option>
  <option value="el oued">EL OUED</option>
  <option value="khenchla">KHENCHLA</option>
  <option value="souk ahras">SOUK AHRAS</option>
  <option value="tipaza">TIPAZA</option>
  <option value="mila">MILA</option>
  <option value="ain defla">AIN DEFLA</option>
  <option value="naama">NAAMA</option>
  <option value="ain temouchent">AIN TEMOUCHENT</option>
  <option value="ghardaia">GHARDAIA</option>
  <option value="ghilezan">GHILEZAN</option>
  <option value="el m'ghaiar">EL M'GHAIAR</option>
  <option value="el menia">EL MENIA</option>
  <option value="ouled djellal">OULED DJELLAL</option>
  <option value="beni abbas">BENI ABBAS</option>
  <option value="timimoun">TIMIMOUN</option>
  <option value="touggourt">TOUGGOURT</option>
  <option value="in saleh">IN SALEH</option>
  <option value="in guezzam">IN GUEZZAM</option>

          <!-- Add more wilayas as needed -->
        </select>

        <label for="address">Full Address</label>
        <input type="text" name="address" id="address" required>

        <button type="submit" class="btn btn-pink btn-rounded">Place Order</button>
      </form>
    </div>
  </div>
                
                    <hr>
                    
                <div class="cart-link">
      <a href="/">Go to Shop</a>
    </div>
                  


  <script>
  const FREE_SHIPPING_THRESHOLD = 5000; // DA
  const basePrice = <%= totalPrice %>; // coming from your server

  // Full wilaya list with delivery times and estimated shipping fees (example data)
  const shippingData = {
    "adrar": { fee: 800, delay: "4–6 days" },
    "chlef": { fee: 600, delay: "3–5 days" },
    "laghouat": { fee: 750, delay: "4–6 days" },
    "oum el bouaghi": { fee: 600, delay: "3–5 days" },
    "batna": { fee: 600, delay: "3–5 days" },
    "bejaia": { fee: 500, delay: "2–4 days" },
    "biskra": { fee: 700, delay: "3–5 days" },
    "bechar": { fee: 850, delay: "4–6 days" },
    "blida": { fee: 300, delay: "1–2 days" },
    "bouira": { fee: 500, delay: "2–3 days" },
    "tamanrasset": { fee: 1000, delay: "5–8 days" },
    "tebessa": { fee: 700, delay: "3–5 days" },
    "tlemcan": { fee: 500, delay: "2–3 days" },
    "tiaret": { fee: 550, delay: "3–4 days" },
    "tizi ouzou": { fee: 400, delay: "2–3 days" },
    "djelfa": { fee: 600, delay: "3–4 days" },
    "jijel": { fee: 450, delay: "2–3 days" },
    "setif": { fee: 500, delay: "2–3 days" },
    "saida": { fee: 600, delay: "3–4 days" },
    "skikda": { fee: 500, delay: "2–3 days" },
    "sidi belabbas": { fee: 550, delay: "3–4 days" },
    "geulma": { fee: 600, delay: "3–4 days" },
    "medea": { fee: 400, delay: "2–3 days" },
    "mostaganem": { fee: 450, delay: "2–3 days" },
    "m'sila": { fee: 500, delay: "2–3 days" },
    "mascara": { fee: 500, delay: "2–3 days" },
    "ouergla": { fee: 700, delay: "4–6 days" },
    "el bayadh": { fee: 750, delay: "4–6 days" },
    "borj bou arreridj": { fee: 500, delay: "2–3 days" },
    "boumerdas": { fee: 350, delay: "1–2 days" },
    "el taref": { fee: 700, delay: "3–5 days" },
    "tissemsil": { fee: 550, delay: "3–4 days" },
    "el oued": { fee: 750, delay: "4–6 days" },
    "khenchla": { fee: 650, delay: "3–5 days" },
    "souk ahras": { fee: 600, delay: "3–4 days" },
    "tipaza": { fee: 300, delay: "1–2 days" },
    "mila": { fee: 500, delay: "2–3 days" },
    "ain defla": { fee: 400, delay: "2–3 days" },
    "naama": { fee: 800, delay: "4–6 days" },
    "ain temouchent": { fee: 550, delay: "3–4 days" },
    "ghardaia": { fee: 700, delay: "4–6 days" },
    "ghilezan": { fee: 500, delay: "2–3 days" },
    "el m'ghaiar": { fee: 800, delay: "4–6 days" },
    "el menia": { fee: 900, delay: "5–7 days" },
    "ouled djellal": { fee: 700, delay: "4–6 days" },
    "beni abbas": { fee: 900, delay: "5–7 days" },
    "timimoun": { fee: 950, delay: "5–7 days" },
    "touggourt": { fee: 850, delay: "4–6 days" },
    "in saleh": { fee: 1000, delay: "6–8 days" },
    "in guezzam": { fee: 1200, delay: "6–9 days" },
    "algiers": { fee: 300, delay: "1–2 days" },
    "oran": { fee: 400, delay: "2–3 days" },
    "constantine": { fee: 500, delay: "2–3 days" },
    "annaba": { fee: 500, delay: "2–3 days" }
  };

  document.addEventListener('DOMContentLoaded', () => {
    const citySelect = document.getElementById('city');
    const infoBox = document.createElement('div');
    infoBox.style.marginTop = '15px';
    infoBox.style.fontWeight = 'bold';
    citySelect.parentNode.insertBefore(infoBox, citySelect.nextSibling);

    citySelect.addEventListener('change', () => {
      const selected = citySelect.value.toUpperCase();
      const data = shippingData[selected] || { fee: 700, delay: "3–5 days" };
      let shippingFee = data.fee;
      const deliveryTime = data.delay;

      let shippingText = `${shippingFee} DA`;
      let finalPrice = basePrice + shippingFee;

      if (basePrice >= FREE_SHIPPING_THRESHOLD) {
        shippingFee = 0;
        shippingText = `Free (over ${FREE_SHIPPING_THRESHOLD} DA)`;
        finalPrice = basePrice;
      }

      infoBox.innerHTML = `
        🚚 <strong>Shipping Fee:</strong> ${shippingText}<br>
        ⏱ <strong>Estimated Delivery:</strong> ${deliveryTime}<br>
        💰 <strong>Total Including Shipping:</strong> ${finalPrice} DA
      `;
    });
  });
</script>





  <!-- Main Navigation -->
  <%- include ("../partials/footer") %>.
 
